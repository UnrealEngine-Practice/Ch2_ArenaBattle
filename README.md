# MyArenaBattle STEP01
  
<aside>
💡 목표

- 언리얼 게임 프레임웍을 활용한 게임 제작 방식의 이해
- 예제에 사용되는 프로젝트와 기본 C++클래스 생성
- 향후 운영될 C++프로젝트 운영 규칙의 이해
</aside>

## ⭐ 언리얼 게임 프레임워크. 게임 콘텐츠의 구조

- 언리얼 엔진은 게임 제작을 위해서, **자체적으로 설계한 프레임워크**를 제공한다.
- 이 프레임워크를 **게임플레이 프레임워크(GamePlayFramework)**라고 부르며 줄여서 게임 프레임웍이라고 한다.
- 언리얼 게임 프레임웍의 각 구성요소를 우선 파악하고, 이를 확장하면서 게임을 제작하는 것을 권장한다.

## ⭐ 게임 콘텐츠의 구성
![image](https://user-images.githubusercontent.com/60467872/232666013-cb03a5ab-ed41-4ebe-8f16-819a0ef0efc1.png)
트블루프린트에서는 푸른색으로 칠해진 컨텐츠를 사용하였다.>

### **월드**

---

게임 콘텐츠를 담는 **가상의 공간**

- 시간, 트랜스폼, 틱을 서비스로써 제공한다.
- World Setting이라는 기본 환경 설정을제공한다.
- 월드가 제공하는 서비스를 바탕으로 동작하는 기본 단위는 Actor로 정의되며, 모든 액터클래스는 접두사A를 사용한다.

<aside>
💡 World의 역할

1. Transform ⇒ 게임 콘텐츠를 담는 공간
2. Tick ⇒ 게임 콘텐츠의 진행
3. Time ⇒ 게임 흐름을 위한 시간
4. WorldSetting ⇒ 기본 환경 설정
5. Actor ⇒ 월드 단위 구성요소
</aside>

### **모드**

---

게임의 규칙을 지정하고 게임을 판정하는 **최고 관리자 액터**로 **형태가 없다**.

- 언리얼 엔진에서는 **하나의 게임에는 하나의 게임모드**만 존재한다.
- 게임 모드에서 입장할 사용자의 규격을 지정할 수 있음.
- 멀티플레이어 게임에서 판정을 처리하는 절대적 권위의 심판의 역할을 한다.

<aside>
💡 GameMode의 역할

1. 플레이어 입장 관리
2. 게임의 최종 승패 관리
3. 게임의 규칙 관리
4. 게임 데이터 검증 ( 멀티플레이 게임 )
</aside>

### 기믹

---

게임 진행을 위한 이벤트를 발생시키는 액터(사물)

- 주로 **이벤트 발생을 위한 충돌 영역**을 설정하는데, 이를 **트리거**(Trigger)라고 한다.
- **트리거를 통해** 캐릭터와 **상호 작용**하고, **월드에 액터를 스폰**해 콘텐츠를 전개한다.

<aside>
💡 Gimmick의 역할

1. 월드 내 사물과 상호 작용을 수행
2. 지정된 조건을 만족하면 이벤트를 발생
3. 월드에 물체를 스폰(Spawn)시킬 수 있음
</aside>

### 플레이어

---

게임에 입장한 사용자 액터로, 형태가 없다.

- 게임 모드의 로그인을 통해 사용자가 게임 월드에 입장하면 플레이어가 생성된다.
    
     *여기서 로그인은 그냥 게임에 입장하는 행위를 의미한다.(일반적으로는 서버 통신을 통한 로그인을 의미하지만 여기서는 조금 다르다.) 싱글 플레이어 게임에서도 로그인을 통해서 사용자가 게임 월드에 입장한다.*
    
- **싱글 플레이 게임**에는 **0번 플레이어**가 설정된다.
- 사용자와의 최종 커뮤니케이션을 담당한다. ( 예) 입력 장치의 해석, 화면 장치로의 출력 )

<aside>
💡 Player의 역할

1. 게임에 입장한 사용자와의 1:1 대응
2. 사용자의 현재 상태 및 데이터를 관리
3. 사용자 입력의 1차 처리 ( 필요시 )
4. 사용자 화면에 대응하는 카메라 관리
5. 사용자 화면에 나타나는 HUD 비 관리
</aside>

### 폰

---

무형의 액터인 플레이어가 빙의해 조종하는 액터.

- 플레이어는 형태가 없는데, 그 플레이어가 폰에 빙의하여 폰을 조작(조종)한다.
- 길찾기를 사용할 수 있으며, 기믹 및 **다른 폰과 상호작용**한다.
- 폰 중에서 **인간형 폰**을 별도로 **캐릭터**라고 지칭한다.

<aside>
💡 Pawn의 역할

1. 빙의(Pos뚀ss)를 통해 플레이어와 연결
2. 사용자 입력의 실제 처리
3. 사용자 화면에 대응되는 카메라 설정
4. 기믹과의 상호작용
5. 현재 상태에 적합한 애니메이션 재생
</aside>

## ⭐ 프로젝트 제작 과정

- 블루프린트 가급적 사용 않고 C++로만 제작
    
   ![image](https://user-images.githubusercontent.com/60467872/232666314-e31f78f0-4cff-4472-b542-f995238dc00b.png)

    
    - 기본 템플릿을 사용하지 않고 직접 제작
    - 두 가지의 카메라 모드를 제공 ( 숄더뷰, 탑뷰 )
    - 액션 입력을 통한 콤보 공격의 구현
    - 아이템 애셋을 활용한 무기 상자의 구현
    - NPC 레벨 정보를 스프레드시트로 관리
    - 플레이어와 전투하는 NPC 인공지능의 구현
    - UI 연동과 게임의 마무리

## ⭐ 프로젝트 폴더 규칙

- **Game** : 게임 모드와 게임 설정에 관련된 클래스 ( 이번 강의에서 생성 )
- Gimmick : 기믹 배경 물체에 관련된 클래스
- **Player** : 플레이어에 관련된! 클래스 ( 이번 강의에서 생성 )
- lnput : 플레이어 입력에 관련된 클래스
- **Character** : 기본 캐릭터와 PC 및 NPC에 관련된! 클래스 ( 이번 강의에서 생성 )
- Action : 캐릭터 액션에 관련된 클래스
- ltem : 캐릭터 아이템에 관련된 클래스
- Stat : 캐릭터 스탯에 관련된 클래스
- AI : NPC 인공지능에 관련된 클래스
- UI : UI에 관련된 클래스
- Physics : 물리 충돌체 설정에 관련된 전처리기
- lnterface : 인터페이스 클래스를 모아둔 폴더

## ⭐ 클래스 생성 규칙

모든 클래스는 AB(ArenaBattle의 약자)의 접두사로 시작함

- 폴더마다 다른 폴더와의 의존성을 최소화
- **다른 폴더의 클래스에 접근할 때** 가급적 **인터페이스를 통해 접근**
- 해더 경로를 찾기 쉽도록 모듈.Build.cs 파일에 모듈의 폴더를 인클루드 경로에 설정
    - `PubIiclncIudePaths.AddRange( new string[] { "모듈이름" } );` 추가

<aside>
⚠️ **가급적 다른 폴더의 헤더를 직접 참조하지 않도록 구성하는 것이 바람직하다.**

</aside>

## ⭐ 프로젝트 시작

1. MyArenaBattle이라는 프로젝트 생성 (Version 5.1.1, 빈 C++ 프로젝트 생성)
2. 애샛 다운로드 : [https://github.com/ideugu/UnrealProgrammingPart2/tree/1_1](https://github.com/ideugu/UnrealProgrammingPart2/tree/1_1) → ArenaBattle 애셋 폴더를 Content폴더에 추가한다.
    
    ```
    MyArenaBattle/
    ├── Binaries/
    |   └── Win64/
    ├──Config/
    │   └── ...
    ├── **Content**/
    |   ├── **ArenaBattle**/
    |   |   ├── **Blueprint**/
    |   |   ├── **Effect**/
    |   |   ├── **Maps**/
    |   |   ├── **MaterialLibrary**/
    |   |   └── **UI**/
    |   ├── Collections/
    |   └── Developers/
    ├── DerivedDataCache/
    │   └── ...
    ├── Intermediate/
    │   └── ...
    ├── Saved/
    │   └── ...
    ├── Source/
    │   └── ...
    ├── MyArenaBattle.sln
    └── MyArenaBattle.uproject
    ```
    
3. 새 Level제작
    
    BasicTemplate으로 Level 생성  
    ![image](https://user-images.githubusercontent.com/60467872/232666189-27e829b5-e412-4389-93dd-6f02b6361f3d.png)  
    이후 바닥 제거하고 ArenaBattle/Environment/Stage의 메쉬를 0,0,0에 위치시킨다.  
